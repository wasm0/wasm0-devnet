version: "3.5"
services:
  fluent:
    image: "fluentxyz/fluent"
    command:
      - "--chain=dev"
      - "node"
      - "--datadir=/datadir"
      - "--dev"
      - "--full"
      - "--http"
      - "--http.addr=0.0.0.0"
      - "--http.api=eth,net,web3,debug,trace,txpool"
      - "--http.port=8545"
      - "--http.corsdomain=*"
      - "--ws"
      - "--ws.addr=0.0.0.0"
      - "--ws.api=eth,net,web3,debug,trace,txpool"
      - "--ws.port=8546"
      - "--ws.origins=*"
    volumes:
      - "./datadir:/datadir"
    ports:
      - "8545:8545"
      - "8546:8546"
    extra_hosts:
      - 'host.docker.internal:host-gateway'
    restart: always
  faucet:
    image: chainflag/eth-faucet:1.1.0
    environment:
      WEB3_PROVIDER: "https://rpc.${DOMAIN_NAME}/"
      PRIVATE_KEY: "ac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80"
    restart: always
  nginx:
    build: "./nginx"
    environment:
      DOMAIN_NAME: "${DOMAIN_NAME}"
    volumes:
      - /root/.acme.sh/:/root/.acme.sh/
    extra_hosts:
      - 'host.docker.internal:host-gateway'
    ports:
      - "443:443"
    restart: always